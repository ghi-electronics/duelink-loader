import{_ as e,o as a,c as s,f as i,t as l,g as n,r as t,j as u,i as c,u as o,b as v,F as r,m as d,d as _}from"./Footer-CGfy84Zi.js";import{u as g}from"./useWebSerial-BmLw6pnG.js";const m={class:"page"},w=["disabled"],f={class:"devices-wrapper"},p={class:"image-box"},h=["src"],b={class:"device-info"},y={key:0,class:"host-badge"},D={key:1,class:"host-no"},C=["href"];_(e({__name:"discover",setup(e){const _=g();function k(e){return new Promise(a=>setTimeout(a,e))}const F=d(!1),j=d(""),P=d(""),V=d(0),L=d("Discover");const N=d(!1);async function T(){N.value=!0,L.value="Please wait...";try{_.devicesChainList.value=[],await k(250);let e=0;if(_.isConnected&&(await _.disconnect(),await k(250)),e=await async function(){if(_.connect_status.value=0,_.connection_mode.value=0,V.value=0,_.progress_percent.value=0,await _.connect()){for(j.value="Connecting to devices...",V.value=0;0==_.connect_status.value&&(await k(100),V.value=_.progress_percent.value,L.value="Connecting..."+V.value+"%",71!=V.value););_.connect_status.value>0&&(V.value=99,await k(100)),V.value=0,await k(100),_.connect_status.value<0&&(P.value="Connection failed",F.value=!0)}return _.connect_status.value>0}(),e){for(_.add_device_chain_status.value=-1,L.value="Discovering device..."+V.value+"%",await _.do_discover(),V.value=0;-1==_.add_device_chain_status.value;)L.value="Discovering device..."+V.value+"%",await k(250),V.value++,V.value>99&&(V.value=99);await _.disconnect(),await k(250),L.value="Finishing...",await k(500)}}finally{N.value=!1,L.value="Discover"}}return(e,d)=>(a(),s("div",m,[d[4]||(d[4]=i("h1",null,"Discover",-1)),d[5]||(d[5]=i("p",null," This page will discovery devices in chain ",-1)),i("div",null,[i("button",{class:"outline-button",onClick:T,disabled:N.value},l(L.value),9,w)]),d[6]||(d[6]=i("hr",null,null,-1)),i("div",f,[(a(!0),s(n,null,t(o(_).devicesChainList.value,e=>(a(),s("div",{key:e.address,class:u(["device-card",{"host-card":e.dl_mode>0}])},[i("div",p,[i("img",{src:e.image,class:"device-image"},null,8,h)]),i("div",b,[i("div",null,[d[0]||(d[0]=i("strong",null,"Device Name:",-1)),c(" "+l(e.name),1)]),i("div",null,[d[1]||(d[1]=i("strong",null,"Device Address:",-1)),c(" "+l(e.address),1)]),i("div",null,[d[2]||(d[2]=i("strong",null,"Firmware Version:",-1)),c(" "+l(e.firmwareVersion),1)]),i("div",null,[d[3]||(d[3]=i("strong",null,"Host:",-1)),e.dl_mode>0?(a(),s("span",y,"Yes")):(a(),s("span",D,"No"))]),i("div",null,[i("a",{href:e.detail,target:"_blank",rel:"noopener noreferrer"}," View Product Details ",8,C)])])],2))),128))]),v(r)]))}},[["__scopeId","data-v-470f8c60"]])).mount("#app");
