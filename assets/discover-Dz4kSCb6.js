import{_ as e,o as a,c as i,f as s,t as n,g as l,r as t,i as u,u as c,b as v,F as o,m as r,d}from"./Footer-CGfy84Zi.js";import{u as _}from"./useWebSerial-yK5NHFH2.js";const w={class:"page"},f=["disabled"],g={class:"devices-wrapper"},m={class:"image-box"},p=["src"],h={class:"device-info"},b=["href"];d(e({__name:"discover",setup(e){const d=_();function D(e){return new Promise(a=>setTimeout(a,e))}const C=r(!1),y=r(""),F=r(""),k=r(0),P=r("Discover");const V=r(!1);async function j(){V.value=!0,P.value="Please wait...";try{d.devicesChainList.value=[],await D(250);let e=0;if(d.isConnected&&(await d.disconnect(),await D(250)),e=await async function(){if(d.connect_status.value=0,d.connection_mode.value=0,k.value=0,d.progress_percent.value=0,await d.connect()){for(y.value="Connecting to devices...",k.value=0;0==d.connect_status.value&&(await D(100),k.value=d.progress_percent.value,P.value="Connecting..."+k.value+"%",71!=k.value););d.connect_status.value>0&&(k.value=99,await D(100)),k.value=0,await D(100),d.connect_status.value<0&&(F.value="Connection failed",C.value=!0)}return d.connect_status.value>0}(),e){for(d.add_device_chain_status.value=-1,P.value="Discovering device..."+k.value+"%",await d.do_discover(),k.value=0;-1==d.add_device_chain_status.value;)P.value="Discovering device..."+k.value+"%",await D(250),k.value++,k.value>99&&(k.value=99);await d.disconnect(),await D(250),P.value="Finishing...",await D(500)}}finally{V.value=!1,P.value="Discover"}}return(e,r)=>(a(),i("div",w,[r[3]||(r[3]=s("h1",null,"Discover",-1)),r[4]||(r[4]=s("p",null," This page will discovery devices in chain ",-1)),s("div",null,[s("button",{class:"outline-button",onClick:j,disabled:V.value},n(P.value),9,f)]),r[5]||(r[5]=s("hr",null,null,-1)),s("div",g,[(a(!0),i(l,null,t(c(d).devicesChainList.value,e=>(a(),i("div",{key:e.address,class:"device-card"},[s("div",m,[s("img",{src:e.image,class:"device-image"},null,8,p)]),s("div",h,[s("div",null,[r[0]||(r[0]=s("strong",null,"Device Name:",-1)),u(" "+n(e.name),1)]),s("div",null,[r[1]||(r[1]=s("strong",null,"Device Address:",-1)),u(" "+n(e.address),1)]),s("div",null,[r[2]||(r[2]=s("strong",null,"Firmware Version:",-1)),u(" "+n(e.firmwareVersion),1)]),s("div",null,[s("a",{href:e.detail,target:"_blank",rel:"noopener noreferrer"}," View Product Details ",8,b)])])]))),128))]),v(o)]))}},[["__scopeId","data-v-0af48185"]])).mount("#app");
